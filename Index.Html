<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TikGirls</title>
  <!-- Font Awesome CDN for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <style>
    :root {
      --primary-color: #ff0066;
      --secondary-color: #25F4EE;
      --glass-bg: rgba(255, 255, 255, 0.1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body, html {
      height: 100%;
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: #000;
      color: white;
      overflow: hidden;
    }

    /* Sections for different views */
    #video-wrapper, #explore-section, #history-section, #genre-section {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: calc(100% - 60px); /* Leave space for bottom nav */
      overflow-y: auto;
      display: none;
    }
    #video-wrapper.active,
    #explore-section.active,
    #history-section.active,
    #genre-section.active {
      display: block;
    }

    /* Video scroll container */
    #video-wrapper {
      scroll-behavior: smooth;
      scroll-snap-type: y mandatory;
    }

    /* Bottom nav styles */
    #bottom-nav {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 60px;
      background: rgba(0,0,0,0.7);
      display: flex;
      justify-content: space-around;
      align-items: center;
      z-index: 10;
    }
    #bottom-nav button {
      background: none;
      border: none;
      color: #fff;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #bottom-nav button.active {
      color: var(--primary-color);
    }

    /* Video slide styles */
    .video-slide {
      height: 100vh;
      width: 100vw;
      display: flex;
      align-items: center;
      justify-content: center;
      scroll-snap-align: start;
      position: relative;
    }

    /* Video container for aspect ratio */
    .video-container {
      position: relative;
      width: 100%;
      max-width: 1280px;
      aspect-ratio: 16 / 9;
      background: #000;
    }
    video {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform: translate(-50%, -50%);
    }

    /* Overlay styles */
    .overlay {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 20px;
      pointer-events: none;
      background: linear-gradient(180deg, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0) 30%, rgba(0,0,0,0) 70%, rgba(0,0,0,0.6));
      z-index: 2;
    }

    .logo {
      font-size: 28px;
      font-weight: 800;
      background: linear-gradient(45deg, var(--secondary-color), var(--primary-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
      letter-spacing: -0.5px;
    }

    /* User info styles */
    .user-info {
      position: absolute;
      left: 20px;
      bottom: 100px;
      max-width: 70%;
      z-index: 100;
      pointer-events: auto;
    }

    .profile-section {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .profile-logo {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: 2px solid var(--primary-color);
      overflow: hidden;
      box-shadow: 0 0 15px rgba(255, 0, 102, 0.4);
      transition: transform 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .profile-logo:hover {
      transform: scale(1.05);
    }
    .profile-logo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .name-follow-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
    }
    .username {
      font-weight: 600;
      font-size: 16px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.5);
    }
    .follow-btn {
      background: linear-gradient(45deg, var(--primary-color), #ff3385);
      border: none;
      color: white;
      padding: 6px 20px;
      border-radius: 20px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    .description {
      font-size: 14px;
      line-height: 1.4;
      margin-bottom: 10px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.5);
    }

    /* Actions styling */
    .actions {
      position: absolute;
      right: 20px;
      bottom: 100px;
      display: flex;
      flex-direction: column;
      gap: 25px;
      align-items: center;
      z-index: 100;
    }
    .action-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      transition: transform 0.3s ease;
      cursor: pointer;
      pointer-events: auto;
    }
    .action-item:hover {
      transform: translateY(-5px);
    }
    .action-item img {
      width: 48px;
      height: 48px;
      padding: 8px;
      background: var(--glass-bg);
      border-radius: 50%;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.2);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    .action-item span {
      font-size: 14px;
      font-weight: 500;
      color: white;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
      display: block;
    }

    /* Sections for explore, history, genre */
    .section {
      padding: 10px;
    }

    /* Grid for explore */
    #explore-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 10px;
    }

    /* Explore video items in grid */
    .grid-item {
      background: #111;
      border-radius: 8px;
      overflow: hidden;
      cursor: pointer;
      padding: 5px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .grid-item img {
      width: 100%;
      aspect-ratio: 16/9;
      object-fit: cover;
    }
    /* List in history */
    #history-list {
      list-style: none;
    }
    #history-list li {
      padding: 8px;
      border-bottom: 1px solid #333;
      cursor: pointer;
    }
    #history-list li:hover {
      background: #222;
    }

    /* Genre tags styling */
    #genre-tags {
      margin-top: 10px;
    }
    .genre-btn {
      display: inline-block;
      background: var(--glass-bg);
      padding: 5px 10px;
      margin: 5px;
      border-radius: 15px;
      cursor: pointer;
      font-size: 14px;
    }
    .genre-btn:hover {
      background: rgba(255,255,255,0.2);
    }

    /* Modal overlay for video playback */
    #videoModal {
      position: fixed;
      top:0; left:0;
      width:100%; height:100%;
      background: rgba(0,0,0,0.8);
      display: none;
      justify-content: center;
      align-items: center;
      padding: 20px;
      z-index: 999;
    }
    #videoModal.active {
      display: flex;
    }
    #videoModal video {
      max-width: 90%;
      max-height: 80%;
    }
    /* Style for the back arrow button inside modal */
    #videoModalClose {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(0,0,0,0.6);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      z-index: 1000;
      transition: background 0.3s;
    }
    #videoModalClose:hover {
      background: rgba(255,255,255,0.3);
    }
    #videoModalClose i {
      color: #fff;
      font-size: 20px;
    }
  </style>
</head>
<body>    

  <!-- Sections for different views -->
  <div id="video-wrapper" class="section active"></div>
  <div id="explore-section" class="section"></div>
  <div id="history-section" class="section"></div>
  <div id="genre-section" class="section"></div>

  <!-- Bottom Navigation -->
  <div id="bottom-nav">
    <button id="homeBtn" class="active" title="Home"><i class="fas fa-home"></i></button>
    <button id="exploreBtn" title="Explore"><i class="fas fa-compass"></i></button>
    <button id="historyBtn" title="History"><i class="fas fa-clock"></i></button>
    <button id="genreBtn" title="Genre"><i class="fas fa-tags"></i></button>
  </div>

  <!-- Modal for video playback with close button -->
  <div id="videoModal">
    <div id="videoModalClose" title="Back"><i class="fas fa-arrow-left"></i></div>
    <video controls></video>
  </div>

  <!-- Scripts -->
  <script>
    // Sample data
    const sharedLink = 'https://auto-button-1.netlify.app/';
    const videoData = [
      {
        src: 'https://ucarecdn.com/afec25ff-3a18-4d99-a7f7-2d5e75f344bd/',
        profileImg: 'https://best-girls-around.com/video_app/new/main/1/img/avatar4.jpg',
        name: 'Jessica Miller',
        description: 'Dancing through life ðŸ’ƒâœ¨ #dance #vibes',
        followers: '1.2M',
        following: false,
        likes: 887,
        comments: 221,
        shares: 229,
        tags: ['dance', 'vibes']
      },
      {
        src: 'https://ucarecdn.com/5552ca5b-c1ec-4c68-b5d3-6bb5617cdf3a/',
        profileImg: 'https://best-girls-around.com/video_app/new/main/1/img/avatar5.jpg',
        name: 'Sophia Wilson',
        description: 'Travel enthusiast ðŸŒâœˆï¸ #wanderlust #adventure',
        followers: '856K',
        following: true,
        likes: 1234,
        comments: 456,
        shares: 78,
        tags: ['travel', 'adventure']
      },
      {
        src: 'https://ucarecdn.com/22ab95f0-74f2-4685-a8cf-34600f8d6bf6/',
        profileImg: 'https://best-girls-around.com/video_app/new/main/1/img/avatar1.jpg',
        name: 'Emma Johnson',
        description: 'Fitness motivation ðŸ’ªðŸ”¥ #fitness #healthyliving',
        followers: '2.1M',
        following: false,
        likes: 987,
        comments: 654,
        shares: 321,
        tags: ['fitness', 'health']
      }
    ];

    // Helper to save viewed videos
    function saveHistory(videoSrc) {
      let history = JSON.parse(localStorage.getItem('viewedVideos')) || [];
      if (!history.includes(videoSrc)) {
        history.unshift(videoSrc);
        if (history.length > 20) history.pop();
        localStorage.setItem('viewedVideos', JSON.stringify(history));
      }
    }

    // Initialize sections
    const sections = {
      home: document.getElementById('video-wrapper'),
      explore: document.getElementById('explore-section'),
      history: document.getElementById('history-section'),
      genre: document.getElementById('genre-section')
    };

    // Utility to switch sections
function showSection(name) {
  for (const key in sections) {
    sections[key].classList.toggle('active', key === name);
  }
  document.querySelectorAll('#bottom-nav button').forEach(btn => btn.classList.remove('active'));
  if (name === 'home') document.getElementById('homeBtn').classList.add('active');
  if (name === 'explore') document.getElementById('exploreBtn').classList.add('active');
  if (name === 'history') document.getElementById('historyBtn').classList.add('active');
  if (name === 'genre') document.getElementById('genreBtn').classList.add('active');

  if (name === 'explore') loadExplore();
  if (name === 'history') loadHistory();
  if (name === 'genre') loadGenre();
}

// Bottom nav button handlers
document.getElementById('homeBtn').onclick = () => showSection('home');
document.getElementById('exploreBtn').onclick = () => showSection('explore');
document.getElementById('historyBtn').onclick = () => showSection('history');
document.getElementById('genreBtn').onclick = () => showSection('genre');

// ----------------------------------
// Home (Video Scroll)
const homeContainer = sections.home;
const homeVideos = [];

function createHomeSlide(data) {
  const slide = document.createElement('div');
  slide.className = 'video-slide';

  slide.innerHTML = `
    <div class="video-container">
      <video src="${data.src}" playsinline muted></video>
    </div>
    <div class="overlay">
      <div class="logo"></div>
      
      <div class="user-info">
        <div class="profile-section">
          <div class="profile-logo">
            <img src="${data.profileImg}" alt="Profile" />
          </div>
          <div class="name-follow-container">
            <div class="username">${data.name}</div>
            <button class="follow-btn" data-url="${sharedLink}">Follow</button>
          </div>
        </div>
        <div class="description">${data.description}</div>
      </div>

      <div class="actions">
        <div class="action-item like-btn" aria-label="Like">
          <img src="https://best-girls-around.com/video_app/new/main/1/img/like.gif" alt="like"/>
          <span>${data.likes}</span>
        </div>
        <div class="action-item comment-btn" aria-label="Comment">
          <img src="https://best-girls-around.com/video_app/new/main/1/img/speech-bubble.png" alt="comment"/>
          <span>${data.comments}</span>
        </div>
        <div class="action-item share-btn" aria-label="Share">
          <img src="https://best-girls-around.com/video_app/new/main/1/img/share.png" alt="share"/>
          <span>Share</span>
        </div>
        <div class="action-item download-btn" style="margin-top:5px;" aria-label="Download">
          <img src="https://best-girls-around.com/video_app/new/main/1/img/download.png" alt="download"/>
          <span>Download</span>
        </div>
      </div>
    </div>
  `;

  // Event handlers
  slide.querySelector('.follow-btn').onclick = () => {
    window.location.href = data.profileUrl || sharedLink;
  };
  slide.querySelector('.download-btn').onclick = () => {
    const a = document.createElement('a');
    a.href = data.src;
    a.download = 'video.mp4';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
  };
  slide.querySelector('.share-btn').onclick = () => {
    const shareUrl = 'https://bit.ly/3ENxGyn';
    if (navigator.share) {
      navigator.share({title:'Check out this video!', url: shareUrl}).catch(() => {});
    } else if (navigator.clipboard) {
      navigator.clipboard.writeText(shareUrl).then(() => alert('Link copied!'));
    } else {
      prompt('Copy this link:', shareUrl);
    }
  };
  // Like & Comment
  slide.querySelector('.like-btn').onclick = () => {
    window.location.href = sharedLink;
  };
  slide.querySelector('.comment-btn').onclick = () => {
    window.location.href = sharedLink;
  };

  // Mute/unmute on click
  const video = slide.querySelector('video');
  video.onclick = () => { video.muted = !video.muted; };

  // Save viewed videos when playing
  video.onplay = () => { saveHistory(data.src); };

  homeContainer.appendChild(slide);
  homeVideos.push(video);
}
videoData.forEach(createHomeSlide);

let activeVideo = null;

// Auto-play control
function handleFirstInteraction() {
  homeVideos.forEach(v => v.play().catch(() => {}));
  window.removeEventListener('click', handleFirstInteraction);
  window.removeEventListener('touchstart', handleFirstInteraction);
}
window.addEventListener('click', handleFirstInteraction);
window.addEventListener('touchstart', handleFirstInteraction);

// Intersection Observer for auto-play
const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    const video = entry.target;
    if (entry.isIntersecting && entry.intersectionRatio >= 0.5) {
      if (activeVideo && activeVideo !== video) activeVideo.pause();
      activeVideo = video;
      video.muted = false;
      video.play().catch(() => {});
    } else {
      video.pause();
    }
  });
}, { threshold: 0.5 });

homeVideos.forEach(v => {
  observer.observe(v);
});

// ----------------------------------
// Explore (Grid view)
function loadExplore() {
  const container = document.getElementById('explore-section');
  container.innerHTML = '<h2 style="padding:10px;">Explore Videos</h2><div id="explore-grid"></div>';
  const grid = document.getElementById('explore-grid');
  grid.innerHTML = '';

  // Show all videos in grid
  videoData.forEach((video, index) => {
    const item = document.createElement('div');
    item.className = 'grid-item';
    item.dataset.src = video.src; // store src for playback
    item.innerHTML = `
      <img src="${video.profileImg}" alt="${video.name}">
      <div style="margin-top:5px;">${video.name}</div>
    `;
    item.onclick = () => {
      openVideoModal(video.src);
    };
    grid.appendChild(item);
  });
}

// ----------------------------------
// View history from localStorage
function loadHistory() {
  const container = document.getElementById('history-section');
  container.innerHTML = '<h2 style="padding:10px;">Viewed Videos</h2><ul id="history-list"></ul>';
  const list = document.getElementById('history-list');
  list.innerHTML = '';

  const history = JSON.parse(localStorage.getItem('viewedVideos')) || [];
  if (history.length === 0) {
    list.innerHTML = '<li>No viewed videos yet.</li>';
    return;
  }

  history.forEach(src => {
    const li = document.createElement('li');
    li.textContent = src;
    li.onclick = () => {
      openVideoModal(src);
    };
    list.appendChild(li);
  });
}

// ----------------------------------
// Genre filtering
function loadGenre() {
  const container = document.getElementById('genre-section');
  container.innerHTML = '<h2 style="padding:10px;">Filter by Genre</h2><div id="genre-tags"></div><div id="genre-videos" style="margin-top:10px;"></div>';

  const genreDiv = document.getElementById('genre-tags');
  const videosDiv = document.getElementById('genre-videos');

  // Collect unique tags
  const tagsSet = new Set();
  videoData.forEach(v => v.tags.forEach(t => tagsSet.add(t)));
  const tags = Array.from(tagsSet);

  // Create genre buttons
  tags.forEach(tag => {
    const btn = document.createElement('button');
    btn.className = 'genre-btn';
    btn.textContent = tag;
    btn.onclick = () => {
      showVideosByGenre(tag);
    };
    genreDiv.appendChild(btn);
  });

  function showVideosByGenre(tag) {
    videosDiv.innerHTML = '';
    const filtered = videoData.filter(v => v.tags.includes(tag));
    if (filtered.length === 0) {
      videosDiv.innerHTML = 'No videos for this genre.';
      return;
    }
    filtered.forEach(v => {
      const item = document.createElement('div');
      item.className = 'grid-item';
      item.dataset.src = v.src; // store src
      item.onclick = () => {
        openVideoModal(v.src);
      };
      item.innerHTML = `
        <img src="${v.profileImg}" alt="${v.name}">
        <div style="margin-top:5px;">${v.name}</div>
      `;
      videosDiv.appendChild(item);
    });
  }
}

// Function to open video modal
function openVideoModal(src) {
  const modal = document.getElementById('videoModal');
  const video = modal.querySelector('video');
  video.src = src;
  video.play().catch(() => {});
  modal.classList.add('active');
}

// Close modal on click outside video or on back arrow button
const modal = document.getElementById('videoModal');
const video = modal.querySelector('video');
const modalCloseBtn = document.getElementById('videoModalClose');

modalCloseBtn.onclick = () => {
  closeVideoModal();
};

modal.onclick = (e) => {
  if (e.target.id === 'videoModal') {
    closeVideoModal();
  }
};

function closeVideoModal() {
  video.pause();
  video.src = '';
  modal.classList.remove('active');
}

// Initialize default view
showSection('home');
</script>
</body>
</html>
