<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>TikGirls</title>
<!-- Font Awesome CDN for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
<style>
  :root {
    --primary-color: #ff0066;
    --secondary-color: #25F4EE;
    --glass-bg: rgba(255, 255, 255, 0.1);
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body, html {
    height: 100%;
    font-family: 'Segoe UI', system-ui, sans-serif;
    background: #000;
    color: white;
    overflow: hidden;
  }

  /* Sections for different views */
  #video-wrapper, #explore-section, #search-section, #genre-section {
    position: absolute;
    top: 0; left: 0;
    width: 100%;
    height: calc(100% - 60px);
    overflow-y: auto;
    display: none;
  }
  #video-wrapper.active,
  #explore-section.active,
  #search-section.active,
  #genre-section.active {
    display: block;
  }

  /* Video scroll container */
  #video-wrapper {
    scroll-behavior: smooth;
    scroll-snap-type: y mandatory;
    background-color: #000;
    color: black;
  }

  /* Bottom nav styles */
  #bottom-nav {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 60px;
    background: rgba(0,0,0,0.7);
    display: flex;
    justify-content: space-around;
    align-items: center;
    z-index: 10;
  }
  #bottom-nav button {
    background: none;
    border: none;
    color: #fff;
    font-size: 25px;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  #bottom-nav button.active {
    color: var(--primary-color);
  }

  /* Video slide styles */
  .video-slide {
    height: 100vh;
    width: 95vw;
    display: flex;
    align-items: center;
    justify-content: center;
    scroll-snap-align: start;
    position: relative;
  }

  /* Video container for aspect ratio */
  .video-container {
    position: relative;
    width: 100%;
    max-width: 1280px;
    aspect-ratio: 16 / 9;
    background: #000;
  }
  video {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 100%;
    height: 100%;
    object-fit: cover;
    transform: translate(-50%, -50%);
  }

  /* Overlay styles (video background overlay) */
  .overlay {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 20px;
    pointer-events: none;
    background: linear-gradient(180deg, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0) 30%, rgba(0,0,0,0) 70%, rgba(0,0,0,0.6));
    z-index: 2;
  }

  /* Logo image styling */
  .logo img {
    height: 40px;
    object-fit: contain;
    pointer-events: auto;
    cursor: pointer;
  }

  /* User info styles */
  .user-info {
    position: absolute;
    left: 20px;
    bottom: 100px;
    max-width: 70%;
    z-index: 100;
    pointer-events: auto;
  }

  .profile-section {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .profile-logo {
    width: 60px;
    height: 48px;
    border-radius: 50%;
    border: 2px solid var(--primary-color);
    overflow: hidden;
    box-shadow: 0 0 15px rgba(255, 0, 102, 0.4);
    transition: transform 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
  }
  .profile-logo:hover {
    transform: scale(1.05);
  }
  .profile-logo img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .name-follow-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
  }
  .username {
    font-weight: 600;
    font-size: 14px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.5);
    cursor: pointer;
  }
  .follow-btn {
    background: linear-gradient(45deg, var(--primary-color), #ff3385);
    border: none;
    color: white;
    padding: 6px 20px;
    border-radius: 20px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  }

  .description {
    font-size: 14px;
    line-height: 1.4;
    margin-bottom: 10px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.5);
  }

  /* Actions styling */
  .actions {
    position: absolute;
    right: 2px;
    bottom: 100px;
    display: flex;
    flex-direction: column;
    gap: 25px;
    align-items: center;
    z-index: 100;
  }
  .action-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    transition: transform 0.3s ease;
    cursor: pointer;
    pointer-events: auto;
  }
  .action-item:hover {
    transform: translateY(-5px);
  }
  .action-item img {
    width: 40px;
    height: 40px;
    padding: 8px;
    background: var(--glass-bg);
    border-radius: 50%;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.2);
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  }
  .action-item span {
    font-size: 12px;
    font-weight: 500;
    color: white;
    text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    display: block;
  }

  /* Sections for explore, search, genre */
  .section {
    padding: 10px;
  }

  /* Grid for explore and search results */
  #explore-grid, #search-results-grid, #genre-videos {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 10px;
  }

  /* Explore/Search video items in grid */
  .grid-item {
    background: #111;
    border-radius: 8px;
    overflow: hidden;
    cursor: pointer;
    padding: 5px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .grid-item .cover-img {
    width: 100%;
    aspect-ratio: 16/ 9;
    object-fit: cover;
  }

  /* Search input styling */
  #search-section input[type="text"] {
    width: 100%;
    padding: 10px;
    margin-bottom: 15px;
    border: 1px solid #ccc;
    border-radius: 10px;
    background: #222;
    color: white;
    font-size: 16px;
    box-sizing: border-box;
  }
  #search-section input[type="text"]::placeholder {
    color: #888;
  }

  /* Genre tags styling */
  #genre-tags {
    margin-top: 10px;
    display: flex;
    flex-wrap: wrap;
  }
  .genre-btn {
    display: inline-block;
    background: var(--glass-bg);
    padding: 5px 10px;
    margin: 5px;
    border-radius: 15px;
    cursor: pointer;
    font-size: 14px;
    color: #fff;
  }
  .genre-btn:hover {
    background: linear-gradient(45deg, var(--primary-color), #ff3385);
  }

  /* Modal overlay for video playback */
  #videoModal {
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    background: #000;
    display: none;
    justify-content: center;
    align-items: center;
    padding: 20px;
    z-index: 999;
  }
  #videoModal.active {
    display: flex;
  }
  #videoModal video {
    max-width: 100%;
    max-height: 30%;
  }
  #videoModalClose {
    position: fixed;
    top: 20px;
    right: 20px;
    background: #fff;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    z-index: 1000;
    transition: background 0.3s;
  }
  #videoModalClose:hover {
    background: rgba(255,255,255,0.3);
  }
  #videoModalClose i {
    color: #000;
    font-size: 20px;
  }

  /* Notification Bar Styles */
  .notification-bar {
    position: fixed;
    bottom: 80px;
    left: 50%;
    transform: translateX(-50%);
    width: 90%;
    max-width: 400px;
    background: linear-gradient(to right, #004d00, #00b300);
    color: white;
    padding: 10px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    opacity: 0;
    transition: opacity 0.5s ease-in-out;
    z-index: 1000;
  }
  .notification-bar img {
    width: 50px;
    height: 50px;
    border-radius: 8px;
    margin-right: 10px;
  }
  .notification-text {
    flex: 1;
    font-size: 12px;
    text-align: left;
  }
  .notification-button {
    background: #ccff00;
    color: #000;
    padding: 5px 15px;
    border-radius: 20px;
    font-weight: bold;
    cursor: pointer;
    border: none;
  }
  .close-button {
    background: none;
    border: none;
    color: white;
    font-size: 18px;
    cursor: pointer;
    margin-left: 10px;
  }

  /* Ad Popup Overlay Styles */
  #adOverlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.2);
    backdrop-filter: blur(5px);
    display: none; /* Initially hidden */
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }
  .popup {
    background: rgba(0, 0, 0, 0.6);
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    width: 98%;
    max-width: 400px;
  }
  .popup h2 {
    font-size: 18px;
    color: white;
    margin-bottom: 20px;
  }
  .button-group {
    display: flex;
    justify-content: space-around;
    margin-top: 10px;
  }
  .button {
    padding: 12px 20px;
    border-radius: 30px;
    border: none;
    cursor: pointer;
    font-size: 12px;
    font-weight: bold;
    flex: 1;
    margin: 0 10px;
  }
  .watch-ads {
    background: #00b300;
    color: white;
  }
  .activate-vip {
    background: #f5b58a;
    color: black;
  }
</style>
</head>
<body>

<!-- Sections for different views -->
<div id="video-wrapper" class="section active"></div>
<div id="explore-section" class="section"></div>
<div id="search-section" class="section"></div>
<div id="genre-section" class="section"></div>

<!-- Ad Popup -->
<div id="adOverlay">
  <div class="popup">
    <h2>Watch the ad to continue</h2>
    <div class="button-group">
      <button class="button watch-ads" onclick="showAdPage('https://www.profitablecpmrate.com/f9z72jat9s?key=fb6ef61efc0589cd3f5c869f9e3a5a18')">Watch Ads</button>
      <button class="button activate-vip" onclick="showAdPage('https://www.paypal.com/ncp/payment/FRAKR57A5Y364')">Activate VIP</button>
    </div>
  </div>
</div>

<!-- Notification Bar -->
<div class="notification-bar" id="notification-bar">
  <img src="https://h5-static.aoneroom.com/oneroomStatic/public/_nuxt/web-logo.apJjVir2.svg" alt="App Logo"/>
  <div class="notification-text">Enjoy more unparalleled movies download Moviebox.</div>
  <button class="notification-button" onclick="window.open('https://ucarecdn.com/82947fa9-98e5-4948-89ec-8fedd32b4be4/', '_blank')">OPEN</button>
  <button class="close-button" onclick="closeNotification()">âœ–</button>
</div>

<!-- Bottom Navigation -->
<div id="bottom-nav">
  <button id="homeBtn" class="active" title="Home"><i class="fas fa-home"></i></button>
  <button id="exploreBtn" title="Explore"><i class="fas fa-compass"></i></button>
  <button id="searchBtn" title="Search"><i class="fas fa-search"></i></button>
  <button id="genreBtn" title="Genre"><i class="fas fa-tags"></i></button>
</div>

<!-- Modal for video playback -->
<div id="videoModal">
  <div id="videoModalClose" title="Back"><i class="fas fa-arrow-left"></i></div>
  <video controls></video>
</div>

<script>
const sharedLink = '#';

const videoData = [
  {
    src: 'https://ucarecdn.com/68a04ceb-3628-4e51-b4f0-f471d9f25f43/',
    cover: 'https://ucarecdn.com/afec25ff-3a18-4d99-a7f7-2d5e75f344bd/-/preview/500x800/',
    profileImg: 'https://best-girls-around.com/video_app/new/main/1/img/avatar4.jpg',
    name: 'Jessica Miller',
    description: 'Dancing through life ðŸ’ƒâœ¨ #dance #vibes',
    followers: '1.2M',
    following: false,
    likes: 887,
    comments: 221,
    shares: 229,
    tags: ['dance', 'vibes']
  },
  {
    src: 'https://ucarecdn.com/68a04ceb-3628-4e51-b4f0-f471d9f25f43/',
    cover: 'https://ucarecdn.com/afec25ff-3a18-4d99-a7f7-2d5e75f344bd/-/preview/500x800/',
    profileImg: 'https://best-girls-around.com/video_app/new/main/1/img/avatar4.jpg',
    name: 'Jessica Miller',
    description: 'Dancing through life ðŸ’ƒâœ¨ #dance #vibes',
    followers: '1.2M',
    following: false,
    likes: 887,
    comments: 221,
    shares: 229,
    tags: ['dance', 'vibes']
  },
  {
    src: 'https://ucarecdn.com/68a04ceb-3628-4e51-b4f0-f471d9f25f43/',
    cover: 'https://cdn77-pic.xvideos-cdn.com/videos/thumbs169ll/87/e8/7d/87e87d35f853ae538a536c5d14451712/87e87d35f853ae538a536c5d14451712.21.jpg',
    profileImg: 'https://best-girls-around.com/video_app/new/main/1/img/avatar5.jpg',
    name: 'Sophia Wilson',
    description: 'Travel enthusiast ðŸŒâœˆï¸ #wanderlust #adventure',
    followers: '856K',
    following: true,
    likes: 1234,
    comments: 456,
    shares: 78,
    tags: ['travel', 'adventure']
  },
  {
    src: 'https://ucarecdn.com/68a04ceb-3628-4e51-b4f0-f471d9f25f43/',
    cover: 'https://ucarecdn.com/22ab95f0-74f2-4685-a8cf-34600f8d6bf6/-/preview/500x800/',
    profileImg: 'https://best-girls-around.com/video_app/new/main/1/img/avatar1.jpg',
    name: 'Emma Johnson',
    description: 'Fitness motivation ðŸ’ªðŸ”¥ #fitness #healthyliving',
    followers: '2.1M',
    following: false,
    likes: 987,
    comments: 654,
    shares: 321,
    tags: ['fitness', 'health']
  }
];

const sections = {
  home: document.getElementById('video-wrapper'),
  explore: document.getElementById('explore-section'),
  search: document.getElementById('search-section'),
  genre: document.getElementById('genre-section')
};

// Utility to switch sections
function showSection(name) {
  for (const key in sections) {
    sections[key].classList.toggle('active', key === name);
  }
  document.querySelectorAll('#bottom-nav button').forEach(btn => btn.classList.remove('active'));
  if (name === 'home') document.getElementById('homeBtn').classList.add('active');
  if (name === 'explore') document.getElementById('exploreBtn').classList.add('active');
  if (name === 'search') document.getElementById('searchBtn').classList.add('active');
  if (name === 'genre') document.getElementById('genreBtn').classList.add('active');

  if (name === 'explore') loadExplore();
  if (name === 'search') loadSearch();
  if (name === 'genre') loadGenre();
}

// Bottom nav handlers
document.getElementById('homeBtn').onclick = () => showSection('home');
document.getElementById('exploreBtn').onclick = () => showSection('explore');
document.getElementById('searchBtn').onclick = () => showSection('search');
document.getElementById('genreBtn').onclick = () => showSection('genre');


// ----------- Home (Video Scroll) -----------
const homeContainer = sections.home;
const homeVideos = [];

function createHomeSlide(data) {
  const slide = document.createElement('div');
  slide.className = 'video-slide';

  slide.innerHTML = `
    <div class="video-container">
      <video src="${data.src}" playsinline muted></video>
    </div>
    <div class="overlay">
      <div class="logo">
        <img src="https://static-cdn77.xvideos-cdn.com/v3/img/skins/default/logo/xvideos.black.svg" alt="App Logo" />
      </div>

      <div class="user-info">
        <div class="profile-section">
          <div class="profile-logo clickable-user" style="cursor:pointer;">
            <img src="${data.profileImg}" alt="Profile" />
          </div>
          <div class="name-follow-container">
            <div class="username clickable-user" style="cursor:pointer;">${data.name}</div>
            <button class="follow-btn" data-url="${sharedLink}">Follow</button>
          </div>
        </div>
        <div class="description">${data.description}</div>
      </div>

      <div class="actions">
        <div class="action-item like-btn" aria-label="Like">
          <img src="https://best-girls-around.com/video_app/new/main/1/img/like.gif" alt="like"/>
          <span>${data.likes}</span>
        </div>
        <div class="action-item comment-btn" aria-label="Comment">
          <img src="https://best-girls-around.com/video_app/new/main/1/img/speech-bubble.png" alt="comment"/>
          <span>${data.comments}</span>
        </div>
        <div class="action-item share-btn" aria-label="Share">
          <img src="https://best-girls-around.com/video_app/new/main/1/img/share.png" alt="share"/>
          <span>Share</span>
        </div>
        <div class="action-item download-btn" style="margin-top:5px;" aria-label="Download">
          <img src="https://best-girls-around.com/video_app/new/main/1/img/download.png" alt="download"/>
          <span>Download</span>
        </div>
      </div>
    </div>
  `;

  // Attach click handlers to profile image and username
  const profileImgElem = slide.querySelector('.profile-logo');
  const usernameElem = slide.querySelector('.username');

  profileImgElem.onclick = () => { loadUserVideos(data.name); };
  usernameElem.onclick = () => { loadUserVideos(data.name); };

  // Event handlers for follow, share, download
  slide.querySelector('.follow-btn').onclick = () => {
    window.location.href = data.profileUrl || sharedLink;
  };
  slide.querySelector('.download-btn').onclick = () => {
    const a = document.createElement('a');
    a.href = data.src;
    a.download = 'video.mp4';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
  };
  slide.querySelector('.share-btn').onclick = () => {
    const shareUrl = 'https://bit.ly/3ENxGyn';
    if (navigator.share) {
      navigator.share({title:'Check out this video!', url:shareUrl}).catch(() => {});
    } else if (navigator.clipboard) {
      navigator.clipboard.writeText(shareUrl).then(() => alert('Link copied!'));
    } else {
      prompt('Copy this link:', shareUrl);
    }
  };

  // Mute/unmute on click
  const video = slide.querySelector('video');
  video.onclick = () => { video.muted = !video.muted; };

  homeContainer.appendChild(slide);
  homeVideos.push(video);
}
videoData.forEach(createHomeSlide);

let activeVideo = null;
function handleFirstInteraction() {
  homeVideos.forEach(v => v.play().catch(() => {}));
  window.removeEventListener('click', handleFirstInteraction);
  window.removeEventListener('touchstart', handleFirstInteraction);
}
window.addEventListener('click', handleFirstInteraction);
window.addEventListener('touchstart', handleFirstInteraction);

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    const video = entry.target;
    if (entry.isIntersecting && entry.intersectionRatio >= 0.5) {
      if (activeVideo && activeVideo !== video) activeVideo.pause();
      activeVideo = video;
      video.muted = false;
      video.play().catch(() => {});
    } else {
      video.pause();
    }
  });
}, { threshold: 0.5 });
homeVideos.forEach(v => observer.observe(v));

// ----------- Explore (Grid view) -----------
function loadExplore() {
  const container = sections.explore;
  container.innerHTML = '<h2 style="padding:10px;"></h2><div id="explore-grid"></div>';
  const grid = document.getElementById('explore-grid');
  grid.innerHTML = '';
  videoData.forEach((video, index) => {
    const item = document.createElement('div');
    item.className = 'grid-item';
    item.dataset.src = video.src;
    item.onclick = () => { openVideoModal(video.src); };
    item.innerHTML = `
      <img class="cover-img" src="${video.cover || video.src + '/-/preview/500x800/'}" alt="Video Cover" />
      <div style="margin-top:5px; text-align:center; font-size:12px;">${video.name}</div>
    `;
    grid.appendChild(item);
  });
}

// ----------- Search by Username -----------
function loadSearch() {
  const container = sections.search;
  container.innerHTML = `
    <h2 style="padding:10px;"></h2>
    <input type="text" id="searchInput" placeholder="Search..."/>
    <div id="search-results-grid" style="padding: 0 10px; display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap:10px; margin-top:10px;"></div>
  `;
  const searchInput = document.getElementById('searchInput');
  const resultsGrid = document.getElementById('search-results-grid');

  function performSearch() {
    const query = searchInput.value.toLowerCase().trim();
    resultsGrid.innerHTML = '';
    if (query.length === 0) {
      resultsGrid.innerHTML = '<p style="text-align:center;">Start typing a username to search.</p>';
      return;
    }
    const filtered = videoData.filter(v => v.name.toLowerCase().includes(query));
    if (filtered.length === 0) {
      resultsGrid.innerHTML = '<p style="text-align:center;">No videos found for this user.</p>';
      return;
    }
    filtered.forEach(v => {
      const item = document.createElement('div');
      item.className = 'grid-item';
      item.dataset.src = v.src;
      item.onclick = () => { openVideoModal(v.src); };
      item.innerHTML = `
        <img class="cover-img" src="${v.cover || v.src + '/-/preview/500x800/'}" alt="Video Cover" />
        <div style="margin-top:5px; text-align:center; font-size:12px;">${v.name}</div>
      `;
      resultsGrid.appendChild(item);
    });
  }
  searchInput.addEventListener('input', performSearch);
  // initial message
  resultsGrid.innerHTML = '<p style="text-align:center;">Start typing a username to search.</p>';
}

// ----------- Load videos by user -----------

function loadUserVideos(username) {
  showSection('search');
  const container = sections.search;
  container.innerHTML = `
    <h2 style="padding:10px;"> ${username}</h2>
    <div id="search-results-grid" style="padding: 0 10px; display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap:10px; margin-top:15px;"></div>
  `;
  const resultsGrid = document.getElementById('search-results-grid');
  const userVideos = videoData.filter(v => v.name === username);
  if (userVideos.length === 0) {
    resultsGrid.innerHTML = '<p style="text-align:center;">No videos found for this user.</p>';
    return;
  }
  userVideos.forEach(v => {
    const item = document.createElement('div');
    item.className = 'grid-item';
    item.dataset.src = v.src;
    item.onclick = () => { openVideoModal(v.src); };
    item.innerHTML = `
      <img class="cover-img" src="${v.cover || v.src + '/-/preview/500x800/'}" alt="Video Cover" />
      <div style="margin-top:5px; text-align:center; font-size:12px;">${v.name}</div>
    `;
    resultsGrid.appendChild(item);
  });
}

// ----------- Video modal functions -----------

function openVideoModal(src) {
  const modal = document.getElementById('videoModal');
  const video = modal.querySelector('video');
  video.src = src;
  video.play().catch(() => {});
  modal.classList.add('active');
  // Pause background videos
  homeVideos.forEach(v => v.pause());
}
const modal = document.getElementById('videoModal');
const videoElement = modal.querySelector('video');
const modalCloseBtn = document.getElementById('videoModalClose');
modalCloseBtn.onclick = () => { closeVideoModal(); };
modal.onclick = (e) => { if (e.target === modal) closeVideoModal(); };
function closeVideoModal() {
  videoElement.pause();
  videoElement.src = '';
  modal.classList.remove('active');
  // Resume background video if on home
  if (sections.home.classList.contains('active') && activeVideo) {
    activeVideo.play().catch(() => {});
  }
}

// Notification bar logic
    setTimeout(() => {
        document.getElementById('notification-bar').style.opacity = '1';
    }, 400); // Show after 400ms

    function closeNotification() {
        document.getElementById('notification-bar').style.opacity = '0';
    }

// ----------- Ad popup -----------

const firstPopupDelay = 15000; // 100 sec
const popupInterval = 50000; // 500 sec
function showAd() {
  const last = localStorage.getItem('lastPopupTime');
  const now = Date.now();
  if (!last || now - last >= popupInterval) {
    document.getElementById('adOverlay').style.display = 'flex';
    localStorage.setItem('lastPopupTime', now);
  } else {
    setTimeout(showAd, popupInterval - (now - last));
  }
}
function showAdPage(url) {
  window.open(url, '_blank');
  closeAd();
}
function closeAd() {
  document.getElementById('adOverlay').style.display = 'none';
  setTimeout(showAd, popupInterval);
}
setTimeout(showAd, firstPopupDelay);

// ----------- Genre Functions -----------

function loadGenre() {
  const container = sections.genre;
  container.innerHTML = '<h2 style="padding:10px;">Select a Genre</h2>';

  const genres = ['Dance', 'Travel', 'Fitness', 'Comedy', 'Music', 'Cooking'];
  const tagsContainer = document.createElement('div');
  tagsContainer.id = 'genre-tags';

  genres.forEach(genre => {
    const btn = document.createElement('div');
    btn.className = 'genre-btn';
    btn.innerText = genre;
    btn.onclick = () => loadGenreVideos(genre);
    tagsContainer.appendChild(btn);
  });

  container.appendChild(tagsContainer);
}

function loadGenreVideos(genre) {
  showSection('genre');
  const container = sections.genre;
  container.innerHTML = `<h2 style="padding:10px;">Genre: ${genre}</h2><div id="genre-videos"></div>`;
  const videosContainer = document.getElementById('genre-videos');

  // Filter videos with matching tags
  const filteredVideos = videoData.filter(v => v.tags && v.tags.includes(genre.toLowerCase()));

  if (filteredVideos.length === 0) {
    videosContainer.innerHTML = '<p style="text-align:center;">No videos found for this genre.</p>';
    return;
  }

  filteredVideos.forEach(v => {
    const item = document.createElement('div');
    item.className = 'grid-item';
    item.dataset.src = v.src;
    item.onclick = () => { openVideoModal(v.src); };
    item.innerHTML = `
      <img class="cover-img" src="${v.cover || v.src + '/-/preview/500x800/'}" alt="Video Cover" />
      <div style="margin-top:5px; text-align:center; font-size:12px;">${v.name}</div>
    `;
    document.getElementById('genre-videos').appendChild(item);
  });
}

// Initialize default view
showSection('home');

</script>
</body>
</html>
