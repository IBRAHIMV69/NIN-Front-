<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ReelShort</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet" />
  <style>
    * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        body {
            background: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }
        
        /* Header Styles */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 20px;
            background-color: #000;
            z-index: 1000;
        }
        .logo-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .logo {
            font-size: 20px;
            border: 1px solid #333;
            background-color: rgba(0, 0, 0, 0.9);
            color: #fff;
            border-radius: 20px;
            padding: 5px 5px;
            font-weight: bold;
        }
        .balance-container {
            display: flex;
            font-size: 15.5px;
            align-items: center;
            gap: 10px;
            color: #fff;
        }
        .wallet-icon {
            font-size: 20px;
            cursor: pointer;
            transition: 0.3s;
            color: #fff;
        }
        .header .bars-icon {
            font-size: 20px;
            cursor: pointer;
            color: #fff;
        }
        .header .bars-icon:hover {
            color: #00b300;
        }

        /* Ad Toggle Styles */
        .ad-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #fff;
            cursor: pointer;
            padding: 5px 5px;
            border-radius: 20px;
            border: 1px solid #555;
            background: rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        .ad-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        .toggle-switch {
            width: 40px;
            height: 20px;
            background: #444;
            border-radius: 10px;
            position: relative;
            transition: 0.3s;
        }
        .toggle-knob {
            width: 16px;
            height: 16px;
            background: #ccc;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
            transition: 0.3s;
        }
        .ad-toggle.active .toggle-switch {
            background: #00b300;
        }
        .ad-toggle.active .toggle-knob {
            background: #fff;
            left: 22px;
        }

        /* Video Container */
        .frame-container {
            width: 100vw;
            height: 100vh;
            position: relative;
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
            opacity: 1;
            transition: opacity 0.5s ease-in-out;
        }

        /* Ad Overlay */
        .ad-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 999;
        }
        .ad-popup {
            position: relative;
            width: 100%;
            max-width: 250px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
        }
        .ad-popup img {
            width: 100%;
            border-radius: 15px;
            display: block;
        }
        .ad-popup .close-btn {
            position: absolute;
            top: 7px;
            right: 10px;
            background: rgba(0, 0, 0, 0.2);
            color: white;
            border: none;
            padding: 0px;
            font-size: 20px;
            cursor: pointer;
            border-radius: 50%;
        }
        .ad-popup .get-btn {
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            background: orange;
            color: white;
            padding: 8px 20px;
            font-size: 17px;
            border: none;
            border-radius: 30px;
            border: 1px solid #ccc;
            cursor: pointer;
        }

        /* Sidebar Menu */
        .sidebar-menu {
            position: fixed;
            top: 0;
            right: -300px;
            width: 250px;
            height: 100%;
            background-color: #000;
            transition: 0.3s;
            z-index: 2000;
            padding: 20px;
            box-shadow: -2px 0 15px rgba(0,0,0,0.2);
        }
        .sidebar-menu.active {
            right: 0;
        }
        .menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 15px;
            border-radius: 50px;
            margin-bottom: 50px;
            background-color: #ff3300;
        }
        .close-menu {
            background-color: #fff;
            color: #ff3300;
            font-size: 28px;
            padding: 0px 4px;
            border-radius: 50px;
            cursor: pointer;
        }
        .social-media-list {
            list-style: none;
        }
        .social-media-item {
            margin: 15px 0;
            display: flex;
            align-items: center;
            color: #fff;
            text-decoration: none;
            transition: 0.3s;
        }
        .social-media-item:hover {
            color: #ff3300;
            transform: translateX(10px);
        }
        .social-media-item i {
            font-size: 20px;
            width: 30px;
            margin-right: 15px;
        }
        .menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1999;
            display: none;
        }

        /* Wallet Overlay */
        .wallet-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 3000;
        }
        .wallet-popup {
            background: #000;
            padding: 25px;
            border-radius: 15px;
            border: 1px solid #ccc;
            width: 90%;
            max-width: 400px;
            text-align: center;
        }
        .balance-display {
            font-size: 2.1rem;
            color: #fff;
            margin: 20px 0;
        }
        .withdraw-btn {
            background: #ff5500;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: 0.3s;
        }
        .withdraw-btn:disabled {
            background: #555;
            cursor: not-allowed;
        }

        /* Theme Toggle */
        .theme-toggle {
            margin-left: 20px;
        }

        /* Additional styles for ads */
        /* Ad Container Styles */
        .ad-container {
          position: fixed;
          bottom: 0;
          width: 100%;
          background: #fff;
          border: 1px solid #ccc;
          box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.2);
          padding: 5px;
          display: flex;
          align-items: center;
          justify-content: space-between;
          z-index: 1000;
          display: none; /* Hidden initially */
        }
        .ad-content {
          display: flex;
          align-items: center;
          flex-grow: 1;
          overflow: hidden;
        }
        .app-icon {
          width: 45px;
          height: 45px;
          border-radius: 12px;
          overflow: hidden;
          margin-right: 10px;
          flex-shrink: 0;
        }
        .app-icon img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }
        .ad-info {
          display: flex;
          flex-direction: column;
          overflow: hidden;
        }
        .app-name {
          font-weight: bold;
          font-size: 15px;
          color: #333;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
          max-width: 200px;
          margin-bottom: 4px;
        }
        .ad-meta {
          font-size: 14px;
          color: #555;
          white-space: nowrap;
        }
        .install-button {
          background-color: #007bff;
          color: white;
          padding: 7px 14px;
          border: none;
          border-radius: 20px;
          font-weight: bold;
          cursor: pointer;
          text-decoration: none;
          margin-left: 10px;
          flex-shrink: 0;
        }
        .install-button:hover {
          background-color: #0056b3;
        }
        /* Optional: style for sponsored label inside ad info */
        .sponsored {
          font-size: 12px;
          color: #777;
          margin-right: 5px;
        }
        /* Play In App Button */
        .play-in-app-container {
            position: fixed;
            bottom: 67px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            z-index: 1000;
        }
        .play-in-app-button {
            background: linear-gradient(to right, #00b300, #008000);
            color: white;
            padding: 12px 24px;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            border: none;
            font-size: 16px;
            border: 1px solid #ccc;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease-in-out;
        }
        .play-in-app-button:hover {
            background: linear-gradient(to right, #008000, #006600);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.3);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
  <!-- Wallet Overlay -->
  <div class="wallet-overlay" id="walletOverlay">
    <div class="wallet-popup" role="dialog" aria-labelledby="withdrawTitle" aria-modal="true">
      <div class="menu-header">
        <h3 id="withdrawTitle" style="color:#fff">Balance</h3>
        <div class="close-menu" onclick="closeWallet()" aria-label="Close wallet overlay">×</div>
      </div>
      <div class="balance-display" id="balanceDisplay">$0.00000</div>
      <button class="withdraw-btn" id="withdrawBtn" onclick="handleWithdraw()">
        Withdraw
      </button>
      <p style="color: #888; margin-top: 15px; font-size: 11.5px;">
        (Minimum amount for withdrawal $100). Earn more by visiting ads <i class="fab fa-paypal"></i> PayPal <i class="fab fa-bitcoin"></i> Bitcoin <i class="fab fa-ethereum"></i> Ethereum
      </p>
    </div>
  </div>

  <!-- Social Media Menu Overlay -->
  <div class="menu-overlay" id="menuOverlay"></div>
  <div class="sidebar-menu" id="sidebarMenu">
    <div class="menu-header">
      <h3 style="color:#fff"><i class="fas fa-stream"></i></h3>
      <div class="close-menu" onclick="closeMenu()" aria-label="Close settings menu">×</div>
    </div>
    <ul class="social-media-list">
      <li>
        <a href="https://facebook.com" class="social-media-item" target="_blank" aria-label="Visit our Facebook page">
          <i class="fab fa-facebook"></i>Facebook
        </a>
      </li>
      <li>
        <a href="https://twitter.com" class="social-media-item" target="_blank" aria-label="Visit our Twitter page">
          <i class="fab fa-twitter"></i>Twitter
        </a>
      </li>
      <li>
        <a href="https://instagram.com" class="social-media-item" target="_blank" aria-label="Visit our Instagram page">
          <i class="fab fa-instagram"></i>Instagram
        </a>
      </li>
      <li>
        <a href="https://youtube.com" class="social-media-item" target="_blank" aria-label="Visit our YouTube page">
          <i class="fab fa-youtube"></i>YouTube
        </a>
      </li>
      <li>
        <a href="https://tiktok.com" class="social-media-item" target="_blank" aria-label="Visit our TikTok page">
          <i class="fab fa-tiktok"></i>TikTok
        </a>
      </li>
    </ul>
  </div>

  <!-- Header -->
  <div class="header">
    <div class="logo-container">
      <div class="logo">MovieGram</div>
    </div>
    <div class="balance-container">
      <i class="fas fa-wallet wallet-icon" onclick="showWallet()" aria-label="Open wallet"></i>
      <span id="headerBalance">$0.00000</span>
    </div>
    <!-- Ad Toggle - turned on by default -->
    <div class="ad-toggle active" id="adToggle" onclick="toggleAd()">
      <span><i class="fas fa-ad"></i></span>
      <div class="toggle-switch">
        <div class="toggle-knob"></div>
      </div>
    </div>
    <!-- Menu Button -->
    <div class="button-group">
      <div class="bars-icon" onclick="toggleMenu()" aria-label="Open menu" style="cursor:pointer;">
        <i class="fas fa-ellipsis-v"></i>
      </div>
    </div>
  </div>

  <!-- Video Container -->
  <div class="frame-container">
    <iframe id="video-frame" allowfullscreen></iframe>
  </div>

  <!-- Popup Ad Overlay -->
  <div class="ad-overlay" id="adOverlay">
    <div class="ad-popup">
      <button class="close-btn" onclick="closeAd()" aria-label="Close ad">✖</button>
      <img id="adImage" src="" alt="Ad Image" />
      <button class="get-btn" id="adGetButton">Chat Now</button>
    </div>
  </div>
  
  <!-- Play In App Button -->
    <div class="play-in-app-container">
        <a href="https://spa.aisports.cc/h5-live/matches">
            <button class="play-in-app-button" id="play-in-app-button">
                <i class="fas fa-basketball-ball"></i> Sports
            </button>
        </a>
    </div>

  <!-- Ad Container (Bottom Fixed) -->
  <div class="ad-container" id="adContainer">
    <div class="ad-wrapper" style="display:flex; align-items:center; width:100%; overflow:hidden;">
      <div class="ad-content" id="adContent"></div>
      <a href="#" id="installButton" class="install-button" target="_blank">Install</a>
    </div>
  </div>

  <script>
    // Initialize adsEnabled based on toggle class
    let adsEnabled = document.getElementById('adToggle').classList.contains('active');

    // Variables
    let videoUrl = "https://moviebox.ng/web/ranking-list?id=997144265920760504&utm_source=h5seo_www.google.com"; // Change this URL as needed
    let balance = parseFloat(localStorage.getItem('userBalance')) || 0;
    const videoFrame = document.getElementById("video-frame");
    const balanceSpan = document.getElementById('balanceDisplay');
    const headerBalanceSpan = document.getElementById('headerBalance');
    const withdrawBtn = document.getElementById('withdrawBtn');
    const adOverlay = document.getElementById('adOverlay');
    const adImage = document.getElementById('adImage');
    const adGetButton = document.getElementById('adGetButton');

    // --- Wallet Functions ---
    function updateBalanceDisplay() {
      document.getElementById('balanceDisplay').textContent = `$${balance.toFixed(5)}`;
      headerBalanceSpan.textContent = `$${balance.toFixed(5)}`;
      localStorage.setItem('userBalance', balance);
      withdrawBtn.disabled = balance < 100;
    }

    function showWallet() {
      document.getElementById('walletOverlay').style.display = 'flex';
      updateBalanceDisplay();
    }
    function closeWallet() {
      document.getElementById('walletOverlay').style.display = 'none';
    }

    function handleWithdraw() {
      if (balance >= 100) {
        if (confirm(`Are you sure you want to withdraw $${balance.toFixed(2)}?`)) {
          alert('Withdrawal request sent! Payment will be processed within 7 working days.');
          balance = 0;
          updateBalanceDisplay();
        }
      } else {
        alert('Minimum withdrawal amount is $100. Keep watching to earn more!');
      }
    }

    // --- Video Functions ---
    function changeVideo(src) {
      videoFrame.style.opacity = "0";
      setTimeout(() => {
        videoFrame.src = src;
        videoFrame.style.opacity = "1";
      }, 300);
    }
    function setCurrentVideo() {
      changeVideo(videoUrl);
    }

    // --- Menu ---
    function toggleMenu() {
      document.getElementById("sidebarMenu").classList.toggle("active");
      document.getElementById("menuOverlay").style.display = "block";
    }
    function closeMenu() {
      document.getElementById("sidebarMenu").classList.remove("active");
      document.getElementById("menuOverlay").style.display = "none";
    }
    document.getElementById("menuOverlay").addEventListener("click", closeMenu);

    // --- Ad Toggle ---
    function toggleAd() {
      const adToggle = document.getElementById('adToggle');
      adsEnabled = !adsEnabled;
      adToggle.classList.toggle('active', adsEnabled);
      if (adsEnabled) {
        showAd();
      } else {
        // When turned off, redirect to PayPal link
        window.location.href = "https://www.paypal.com/ncp/payment/FRAKR57A5Y364";
      }
    }

    // --- Ads System ---
    const apps = [
      {
        name: "Cheelee: Short Videos f...",
        icon: "https://tinylink.info/119AL",
        rating: "4.5",
        link: "https://tinylink.info/119Aa"
      },
      {
        name: "CoolApp",
        icon: "https://tinylink.info/119A0",
        rating: "4.8",
        link: "https://tinylink.info/YchD"
      },
      {
        name: "Z League: Mini Games & Friends",
        icon: "https://tinylink.info/Ycg4",
        rating: "4.0",
        link: "https://tinylink.info/119yG"
      }
    ];

    let currentAdIndex = parseInt(localStorage.getItem('currentAdIndex')) || 0;

    function showAd(index) {
      const app = apps[index];
      document.getElementById('adContent').innerHTML = `
        <div class="app-icon">
          <img src="${app.icon}" alt="App Icon" />
        </div>
        <div class="ad-info">
          <div class="app-name">${app.name}</div>
          <div class="ad-meta">
            <span class="sponsored">Sponsored ·</span>
            <span>${app.rating} ★ FREE</span>
          </div>
        </div>
      `;
      document.getElementById('installButton').href = app.link;
      document.getElementById('adContainer').style.display = 'flex';

      localStorage.setItem('currentAdIndex', index);
    }

    function rotateAds() {
      showAd(currentAdIndex);
      currentAdIndex = (currentAdIndex + 1) % apps.length;
    }

    // Initial ad rotation
    rotateAds();
    setInterval(rotateAds, 15000); // every 15 seconds

    // --- Popup Ads System ---
    const popupAds = [
      {
        image: "https://bit.ly/4gHMJHL",
        link: "https://true-click.pro/a/44J1UBOggfxOkx",
        buttonTitle: "Chat Now"
      },
      {
        image: "https://bit.ly/49TAXap",
        link: "https://true-click.pro/a/44J1UBOggfxOkx",
        buttonTitle: "Chat Now"
      }
    ];

    let popupAdIndex = 0; // separate from apps index
    const popupInterval = 80000; // minimum delay between popup ads

    function showPopupAd() {
      if (!adsEnabled) return; // Only show ads if enabled

      const lastPopupTime = localStorage.getItem('lastPopupTime');
      const currentTime = Date.now();

      if (!lastPopupTime || currentTime - lastPopupTime >= popupInterval) {
        updatePopupAdContent();
        document.getElementById('adOverlay').style.display = 'flex';
        // Increase balance for showing the ad
        balance += 0.00001;
        updateBalanceDisplay();
        localStorage.setItem('lastPopupTime', currentTime);
        // Schedule next popup after delay
        setTimeout(showPopupAd, popupInterval);
      } else {
        // Wait until enough time has passed
        setTimeout(showPopupAd, popupInterval - (currentTime - lastPopupTime));
      }
    }

    function updatePopupAdContent() {
      const ad = popupAds[popupAdIndex];
      const getBtn = document.querySelector('.get-btn');
      document.getElementById('adImage').src = ad.image;
      document.getElementById('adImage').setAttribute('data-link', ad.link);
      getBtn.setAttribute('data-link', ad.link);
      getBtn.textContent = ad.buttonTitle;

      // Set click handlers
      document.getElementById('adImage').onclick = visitAd;
      getBtn.onclick = visitAd;

      // Prepare for next ad
      popupAdIndex = (popupAdIndex + 1) % popupAds.length;
    }

    function visitAd(event) {
      const url = event.target.getAttribute('data-link');
      window.open(url, '_blank');

      // Optional: give extra balance for ad click
      balance += 0.00021;
      updateBalanceDisplay();
      closeAd();
    }

    function closeAd() {
      document.getElementById('adOverlay').style.display = 'none';
      // Restart popup ad cycle after delay
      setTimeout(showPopupAd, popupInterval);
    }

    // --- Initialization ---
    window.onload = function () {
      setCurrentVideo();
      updateBalanceDisplay();

      // Show the popup ad immediately on page load
      updatePopupAdContent();
      document.getElementById('adOverlay').style.display = 'flex';

      // Start the popup cycle
      setTimeout(showPopupAd, popupInterval);
    };
  </script>
</body>
</html>
